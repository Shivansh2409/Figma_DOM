<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SimpleFigma Clone (With Layers & Export)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body
    class="flex flex-col h-screen bg-gray-50 text-slate-800 font-sans overflow-hidden"
  >
    <!-- Header / Toolbar -->
    <header
      class="h-12 bg-white border-b border-gray-200 flex items-center px-4 justify-between shadow-sm z-30 relative"
    >
      <div class="flex items-center space-x-4">
        <div
          class="font-bold text-lg tracking-tight mr-4 flex items-center gap-2"
        >
          <div class="w-6 h-6 bg-purple-600 rounded-md"></div>
          SimpleFigma JS
        </div>

        <div class="h-6 w-px bg-gray-300 mx-2"></div>

        <button
          onclick="app.addElement('rectangle')"
          class="p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-sm font-medium"
          title="Add Rectangle"
        >
          <i data-lucide="square" class="w-4 h-4"></i>
          <span>Rectangle</span>
        </button>
        <button
          onclick="app.addElement('circle')"
          class="p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-sm font-medium"
          title="Add Circle"
        >
          <i data-lucide="circle" class="w-4 h-4"></i>
          <span>Circle</span>
        </button>
        <button
          onclick="app.addElement('triangle')"
          class="p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-sm font-medium"
          title="Add Triangle"
        >
          <i data-lucide="triangle" class="w-4 h-4"></i>
          <span>Triangle</span>
        </button>

        <div class="h-6 w-px bg-gray-300 mx-1"></div>

        <button
          onclick="app.addElement('text')"
          class="p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-sm font-medium"
          title="Add Text"
        >
          <i data-lucide="type" class="w-4 h-4"></i>
          <span>Text</span>
        </button>
      </div>

      <div class="flex items-center space-x-2">
        <button
          onclick="app.exportJSON()"
          class="p-2 hover:bg-gray-100 rounded-md transition-colors text-gray-600"
          title="Export JSON"
        >
          <i data-lucide="file-json" class="w-4 h-4"></i>
        </button>
        <button
          onclick="app.exportHTML()"
          class="p-2 hover:bg-gray-100 rounded-md transition-colors text-gray-600"
          title="Export HTML"
        >
          <i data-lucide="file-code" class="w-4 h-4"></i>
        </button>

        <div class="h-6 w-px bg-gray-300 mx-1"></div>

        <button
          onclick="app.deleteSelected()"
          id="btn-delete"
          class="p-2 rounded-md transition-colors text-gray-300 cursor-not-allowed"
          disabled
          title="Delete Selected"
        >
          <i data-lucide="trash-2" class="w-4 h-4"></i>
        </button>
      </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex flex-1 overflow-hidden relative">
      <!-- LEFT Sidebar: Layers -->
      <aside
        class="w-64 bg-white border-r border-gray-200 flex flex-col z-20 shadow-lg h-full"
      >
        <div
          class="p-3 border-b border-gray-200 flex justify-between items-center bg-gray-50"
        >
          <h2
            class="font-semibold text-xs uppercase text-gray-500 tracking-wider"
          >
            Layers
          </h2>
          <div class="flex gap-1">
            <button
              onclick="app.reorderLayer(1)"
              class="p-1 hover:bg-gray-200 rounded text-gray-600"
              title="Bring Forward"
            >
              <i data-lucide="arrow-up" class="w-4 h-4"></i>
            </button>
            <button
              onclick="app.reorderLayer(-1)"
              class="p-1 hover:bg-gray-200 rounded text-gray-600"
              title="Send Backward"
            >
              <i data-lucide="arrow-down" class="w-4 h-4"></i>
            </button>
          </div>
        </div>
        <!-- Layers List -->
        <div id="layers-list" class="flex-1 overflow-y-auto py-2">
          <!-- Injected via JS -->
        </div>
      </aside>

      <!-- Canvas -->
      <div
        id="canvas"
        class="flex-1 relative bg-gray-100 overflow-hidden cursor-crosshair canvas-bg"
      >
        <!-- Elements will be injected here -->
      </div>

      <!-- RIGHT Sidebar: Properties -->
      <aside
        class="w-72 bg-white border-l border-gray-200 flex flex-col z-20 shadow-lg h-full"
      >
        <div class="p-4 border-b border-gray-200">
          <h2
            class="font-semibold text-sm uppercase text-gray-500 tracking-wider mb-1"
          >
            Properties
          </h2>
          <div
            id="prop-id-display"
            class="text-xs text-gray-400 font-mono break-all italic"
          >
            No selection
          </div>
        </div>

        <div
          id="properties-panel"
          class="hidden p-4 space-y-6 overflow-y-auto h-full"
        >
          <!-- Layout -->
          <div class="space-y-3">
            <h3 class="text-sm font-medium text-gray-700">Layout</h3>
            <div class="grid grid-cols-2 gap-3">
              <div class="space-y-1">
                <label class="text-xs text-gray-500">X</label>
                <input
                  type="number"
                  id="inp-x"
                  class="w-full p-1.5 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500"
                />
              </div>
              <div class="space-y-1">
                <label class="text-xs text-gray-500">Y</label>
                <input
                  type="number"
                  id="inp-y"
                  class="w-full p-1.5 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500"
                />
              </div>
              <div class="space-y-1">
                <label class="text-xs text-gray-500">Width</label>
                <input
                  type="number"
                  id="inp-width"
                  class="w-full p-1.5 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500"
                />
              </div>
              <div class="space-y-1">
                <label class="text-xs text-gray-500">Height</label>
                <input
                  type="number"
                  id="inp-height"
                  class="w-full p-1.5 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500"
                />
              </div>
              <div class="space-y-1 col-span-2">
                <label class="text-xs text-gray-500">Rotation (deg)</label>
                <div class="flex items-center gap-2">
                  <i data-lucide="rotate-cw" class="w-3 h-3 text-gray-400"></i>
                  <input
                    type="number"
                    id="inp-rotation"
                    class="w-full p-1.5 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500"
                  />
                </div>
              </div>
            </div>
          </div>

          <!-- Settings -->
          <div class="space-y-3">
            <h3
              id="type-settings-header"
              class="text-sm font-medium text-gray-700 capitalize"
            >
              Settings
            </h3>

            <!-- Shapes (Rect/Circle/Triangle) -->
            <div id="group-shape" class="hidden space-y-1">
              <label class="text-xs text-gray-500">Fill Color</label>
              <div class="flex gap-2">
                <input
                  type="color"
                  id="inp-color-picker"
                  class="h-8 w-8 cursor-pointer border-0 p-0 rounded overflow-hidden"
                />
                <input
                  type="text"
                  id="inp-color-text"
                  class="flex-1 p-1.5 bg-gray-50 border border-gray-200 rounded text-sm font-mono focus:outline-none focus:border-purple-500 uppercase"
                />
              </div>
            </div>

            <!-- Text Settings -->
            <div id="group-text" class="hidden space-y-3">
              <div class="space-y-1">
                <label class="text-xs text-gray-500">Content</label>
                <textarea
                  id="inp-content"
                  class="w-full p-2 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500 min-h-[60px]"
                ></textarea>
              </div>

              <!-- Font Size & Color -->
              <div class="grid grid-cols-2 gap-3">
                <div class="space-y-1">
                  <label class="text-xs text-gray-500">Size (px)</label>
                  <input
                    type="number"
                    id="inp-fontsize"
                    class="w-full p-1.5 bg-gray-50 border border-gray-200 rounded text-sm focus:outline-none focus:border-purple-500"
                  />
                </div>
                <div class="space-y-1">
                  <label class="text-xs text-gray-500">Text Color</label>
                  <div class="flex gap-2">
                    <input
                      type="color"
                      id="inp-text-color-picker"
                      class="h-8 w-8 cursor-pointer border-0 p-0 rounded overflow-hidden"
                    />
                  </div>
                </div>
              </div>

              <!-- Alignment -->
              <div class="space-y-1">
                <label class="text-xs text-gray-500">Alignment</label>
                <div
                  class="flex bg-gray-50 border border-gray-200 rounded p-1 gap-1"
                >
                  <button
                    id="btn-align-left"
                    class="align-btn flex-1 p-1 hover:bg-white rounded text-gray-600 flex justify-center"
                    title="Left"
                  >
                    <i data-lucide="align-left" class="w-4 h-4"></i>
                  </button>
                  <button
                    id="btn-align-center"
                    class="align-btn flex-1 p-1 hover:bg-white rounded text-gray-600 flex justify-center"
                    title="Center"
                  >
                    <i data-lucide="align-center" class="w-4 h-4"></i>
                  </button>
                  <button
                    id="btn-align-right"
                    class="align-btn flex-1 p-1 hover:bg-white rounded text-gray-600 flex justify-center"
                    title="Right"
                  >
                    <i data-lucide="align-right" class="w-4 h-4"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Metadata Inspector -->
          <div class="bg-slate-800 rounded-md p-3 mt-8">
            <div class="flex items-center gap-2 mb-2 text-slate-300">
              <i data-lucide="info" class="w-3.5 h-3.5"></i>
              <h4 class="text-xs font-bold uppercase">Element Metadata</h4>
            </div>
            <pre
              id="metadata-display"
              class="text-[10px] text-green-400 font-mono overflow-x-auto whitespace-pre-wrap"
            ></pre>
          </div>
        </div>

        <div
          id="empty-state"
          class="flex-1 flex flex-col items-center justify-center text-gray-400 p-8 text-center"
        >
          <i
            data-lucide="mouse-pointer-2"
            class="w-12 h-12 mb-4 text-gray-200"
          ></i>
          <p class="text-sm">
            Select an element on the canvas to view its properties.
          </p>
        </div>
      </aside>
    </div>
    <script src="app.js"></script>
  </body>
</html>
